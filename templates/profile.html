{% extends "base.html" %}

{% block content %}
<div class="block">
    <a href="{{ user.image }}"><img src="{{ user.image }}" width=28% height=280px
                                    align="left" style="object-fit: fill;"></a>
    <br>
    <h3 style="text-align: center;">{{ title }}</h3>
    <textarea class="profile" disabled>
        {{ user.about }}
    </textarea>
    <br>
    <br>
    <h6>Дата рождения: {{ user.birthday }}</h6>
    <h6>Родной город: {{ user.hometown }}</h6>
    <h6>Друзей: <a style="color: black;" href="/friends/{{ user.id }}">{{ user.friends_count }}</a></h6>
    <br>
    {% if user.id == current_user.id %}
        <a class="btn btn-outline-secondary" href="/redact_profile" style="width: 100%; margin-top: 2%;">Редактировать</a>
        <a class="btn btn-outline-secondary" href="/create_news" style="width: 100%; margin-top: 2%;">Создать запись</a>
        <br>
    {% else %}
        <a class="btn btn-outline-primary" href="/send_message/{{ user.id }}" style="width: 100%; margin-top: 2%;">Отправить сообщение</a>
        {% if friend %}
            <a class="btn btn-outline-danger" href="/delete_friend/{{ user.id }}" style="width: 100%; margin-top: 2%;">Удалить из друзей</a>
        {% else %}
            {% if request %}
                <a class="btn btn-outline-danger" href="/cancel_request/{{ user.id }}" style="width: 100%; margin-top: 2%;">Отменить запрос</a>
            {% else %}
                <a class="btn btn-outline-success" href="/add_friend/{{ user.id }}" style="width: 100%; margin-top: 2%;">Добавить в друзья</a>
            {% endif %}
        {% endif %}
        <br>
    {% endif %}
    {% for new in user.news %}
        <br>
        <div class="alert alert-success" role="alert" style="margin: 1%;">
            <a style="text-decoration: none; color: black;" href="/users/{{ new.creator }}">
                <h4 class="alert-heading">{{ title }}</h4>
            </a>
            <hr>
            <textarea class="new" disabled>
                {{ new.content }}
            </textarea>
            <h6 style="text-align: right;">{{ new.date }}</h6>
            {% if user.id == current_user.id %}
                <a class="btn btn-primary" href="/news/{{ new.id }}">Редактировать</a>
            {% else %}
                {% if new.id in liked %}
                    <a class="btn btn-danger" href="/unlike/{{ new.id }}">Уже не нравится</a>
                {% else %}
                    <a class="btn btn-success" href="/like/{{ new.id }}">Нравится</a>
                {% endif %}
            {% endif %}
            <h6 style="position: absolute; bottom: 5%; right: 5%;">{{ new.likes }}</h6>
        </div>
    {% endfor %}
</div>
{% endblock %}