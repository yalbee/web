{% extends "base.html" %}

{% block content %}
<div class="block">
    <a href="{{ user.image }}"><img src="{{ user.image }}" width=28% height=280px
                                    align="left" style="object-fit: fill;"></a>
    <br>
    <h3 style="text-align: center;">{{ title }}</h3>
    <textarea class="profile" disabled>
        {{ user.about }}
    </textarea>
    <br>
    <br>
    <h6>Дата рождения: {{ user.birthday }}</h6>
    <h6>Город: {{ user.hometown }}</h6>
    <h6>Подписчиков: <a style="color: black;" href="/subscribers/{{ user.id }}">{{ user.subs_count }}</a></h6>
    <br>
    {% if user.id == current_user.id %}
        <a class="btn btn-outline-secondary" href="/redact_profile" style="width: 100%; margin-top: 2%;">Редактировать</a>
        <a class="btn btn-outline-secondary" href="/create_news" style="width: 100%; margin-top: 2%;">Создать запись</a>
        <br>
    {% else %}
        {% if subscribed %}
            <a class="btn btn-outline-danger" href="/unsubscribe/{{ user.id }}" style="width: 100%; margin-top: 2%;">Отписаться</a>
        {% else %}
            <a class="btn btn-outline-success" href="/subscribe/{{ user.id }}" style="width: 100%; margin-top: 2%;">Подписаться</a>
        {% endif %}
        <br>
    {% endif %}
    {% for new in news %}
        <br>
        <div class="content">
            <h3 style="text-align: center">{{ new.title }}</h3>
            <a style="text-decoration: none; color: black;" href="/users/{{ new.creator }}">
                <h4 class="alert-heading">{{ new.user.name }} {{ new.user.surname }}</h4>
            </a>
            <hr>
            <h6 style="text-align: right"><a style="color: black;" href="/news/{{ new.category }}">{{ new.category }}</a></h6>
            <textarea class="new" disabled>
                {{ new.content }}
            </textarea>
            <h6 style="text-align: right;">{{ new.string_dt }}</h6>
            {% if user.id == current_user.id %}
                <h6 style="text-align: left;">
                    <a class="btn btn-primary" href="/news/{{ new.id }}">Редактировать</a> {{ new.likes }}
                </h6>
            {% else %}
                {% if new.id in liked %}
                    <h6 style="text-align: left;">
                        <a class="btn btn-danger" href="/unlike/{{ new.id }}">Уже не нравится</a> {{ new.likes }}
                    </h6>
                {% else %}
                    <h6 style="text-align: left;">
                        <a class="btn btn-success" href="/like/{{ new.id }}">Нравится</a> {{ new.likes }}
                    </h6>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endblock %}